(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{225:function(t,e,r){var content=r(230);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(44).default)("3f31d752",content,!0,{sourceMap:!1})},226:function(t,e,r){var content=r(232);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(44).default)("e2022760",content,!0,{sourceMap:!1})},227:function(t,e,r){"use strict";r(57),r(76);var n={name:"Button",props:{type:{type:String,default:"primary",validator:function(t){return["primary","secondary"].includes(t)}},loading:{type:Boolean,default:!1}}},o=(r(229),r(17)),component=Object(o.a)(n,(function(){var t,e=this.$createElement,n=this._self._c||e;return n("button",this._g({class:(t={},t[this.type]=!0,t.loading=this.loading,t)},this.$listeners),[n("transition",{attrs:{name:"fade"}},[this.loading?n("img",{attrs:{src:r(228)}}):n("span",[this._t("default")],2)])],1)}),[],!1,null,"73db253f",null);e.a=component.exports},228:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIyOHB4IiBoZWlnaHQ9IjI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cGF0aCBkPSJNNjQgOS43NUE1NC4yNSA1NC4yNSAwIDAgMCA5Ljc1IDY0SDBhNjQgNjQgMCAwIDEgMTI4IDBoLTkuNzVBNTQuMjUgNTQuMjUgMCAwIDAgNjQgOS43NXoiIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMSIvPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDY0IDY0IiB0bz0iMzYwIDY0IDY0IiBkdXI9IjEyMDBtcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT48L2c+PC9zdmc+"},229:function(t,e,r){"use strict";var n=r(225);r.n(n).a},230:function(t,e,r){(e=r(43)(!1)).push([t.i,"button[data-v-73db253f]{min-width:120px;height:40px;padding-left:2rem;padding-right:2rem;position:relative;border-radius:.375rem;--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity));outline:0;transition-property:all;transition-duration:75ms;transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button.primary[data-v-73db253f]{--bg-opacity:1;background-color:#5f9fff;background-color:rgba(95,159,255,var(--bg-opacity))}button.primary[data-v-73db253f]:hover{background-color:#2778f3}button.primary[data-v-73db253f]:active{box-shadow:0 4px 4px rgba(0,0,0,.25)}button.secondary[data-v-73db253f]{--bg-opacity:1;background-color:#e2e2e2;background-color:rgba(226,226,226,var(--bg-opacity))}button.secondary[data-v-73db253f]:hover{--bg-opacity:1;background-color:#d4d4d4;background-color:rgba(212,212,212,var(--bg-opacity))}button.secondary[data-v-73db253f]:active{--bg-opacity:1;background-color:#5f9fff;background-color:rgba(95,159,255,var(--bg-opacity))}button.loading[data-v-73db253f]{pointer-events:none}button img[data-v-73db253f]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}",""]),t.exports=e},231:function(t,e,r){"use strict";var n=r(226);r.n(n).a},232:function(t,e,r){(e=r(43)(!1)).push([t.i,".title[data-v-362737da]{--bg-opacity:1;background-color:#5f9fff;background-color:rgba(95,159,255,var(--bg-opacity));padding-top:2rem;padding-bottom:1rem;text-align:center;--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity));font-weight:400;font-size:26px}",""]),t.exports=e},233:function(t,e,r){"use strict";r.d(e,"b",(function(){return m})),r.d(e,"d",(function(){return v})),r.d(e,"c",(function(){return h})),r.d(e,"a",(function(){return x}));r(56),r(19),r(18),r(14),r(45);var n=r(20),o=r(2),c=r(99),l=r(77);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m=function(){function t(t){t.preventDefault(),t.returnValue=""}Object(o.g)((function(){window.addEventListener("beforeunload",t)})),Object(o.i)((function(){window.removeEventListener("beforeunload",t)}))},v=function(){var t=Object(c.c)(),e=t.store,r=t.redirect;e.state.createTest.metaFinished||r("/create-test")},h=function(){var t=Object(c.c)(),e=t.store,r=t.redirect;e.state.createTest.testID||r("/create-test")};function y(t){return JSON.parse(JSON.stringify(t))}var x={computed:f(f({},Object(l.c)("createTest",["currentQuestion"])),Object(l.b)("createTest",["questionExists"])),methods:{setInitialValue:function(t){var e,r=this.$route.query.timestamp;return(null===(e=this.currentQuestion)||void 0===e?void 0:e[t])?y(this.currentQuestion[t]):this.questionExists(r)?(this.$store.commit("createTest/setCurrentQuestion",this.questionExists(r)),y(this.questionExists(r)[t])):void 0}}}},234:function(t,e,r){"use strict";var n={name:"CreationWrapper"},o=(r(231),r(17)),component=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex justify-center"},[e("div",{staticClass:"bg-white w-full",staticStyle:{"max-width":"760px"}},[e("div",{staticClass:"title"},[this._t("title")],2),this._v(" "),this._t("content")],2)])}),[],!1,null,"362737da",null);e.a=component.exports},235:function(t,e,r){var content=r(238);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(44).default)("400a9f88",content,!0,{sourceMap:!1})},237:function(t,e,r){"use strict";var n=r(235);r.n(n).a},238:function(t,e,r){(e=r(43)(!1)).push([t.i,".button[data-v-2ca5aada]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;white-space:nowrap;background-color:#e2e2e2;border-radius:6px}.button[data-v-2ca5aada],.button .add[data-v-2ca5aada]{display:flex;align-items:center}.button .add[data-v-2ca5aada]{justify-content:center;border:2px solid #fff;border-radius:6px;width:40px;height:40px;margin:-2px 0}.button .text[data-v-2ca5aada]{font-size:16px;line-height:25px;color:#000;margin-left:16px;padding-right:20px}",""]),t.exports=e},239:function(t,e,r){"use strict";r(57),r(76);var n={name:"PlusButton",props:{color:{type:String,default:"blue",validator:function(t){return["blue","gray"].includes(t)}}}},o=(r(237),r(17)),component=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",this._g({staticClass:"button"},this.$listeners),[e("div",{staticClass:"add",style:"blue"===this.color?"background: #5f9fff;":"background: #e2e2e2;"},[e("svg",{attrs:{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M7 0V14",stroke:"black","stroke-width":"2"}}),this._v(" "),e("path",{attrs:{d:"M0 7L14 7",stroke:"black","stroke-width":"2"}})])]),this._v(" "),e("div",{staticClass:"text"},[this._t("default")],2)])}),[],!1,null,"2ca5aada",null);e.a=component.exports},248:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODQiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4NCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGVsbGlwc2UgY3g9IjQyIiBjeT0iNDAiIHJ4PSI0MS4zNzkzIiByeT0iNDAiIGZpbGw9IiM1RjlGRkYiLz4KPHBhdGggZD0iTTI3LjI1NiA1OC4zMjc4VjIxLjQ2OTZDMjcuMjU2IDE4LjQyOSAzMC41MTQ0IDE2LjUwMDIgMzMuMTgwMSAxNy45NjI4TDY1Ljc2MzIgMzUuODQwMUM2OC40OTA3IDM3LjMzNjYgNjguNTQwOCA0MS4yMzcyIDY1Ljg1MjUgNDIuODAzMkwzMy4yNjk1IDYxLjc4NDFDMzAuNjAyOCA2My4zMzc1IDI3LjI1NiA2MS40MTM5IDI3LjI1NiA1OC4zMjc4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg=="},249:function(t,e,r){var n=r(5);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},250:function(t,e,r){var content=r(272);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(44).default)("86f52158",content,!0,{sourceMap:!1})},271:function(t,e,r){"use strict";var n=r(250);r.n(n).a},272:function(t,e,r){(e=r(43)(!1)).push([t.i,".play-button[data-v-53db2f1a]{z-index:1;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.player[data-v-53db2f1a]{pointer-events:none}.tooltip[data-v-53db2f1a]{display:flex;flex-direction:column;align-items:center}.tooltip .button[data-v-53db2f1a]{cursor:pointer;display:flex;white-space:nowrap;background-color:#e2e2e2;align-items:center;border-radius:6px}.tooltip .button .add[data-v-53db2f1a]{display:flex;align-items:center;justify-content:center;background:#5f9fff;border:2px solid #fff;border-radius:6px;width:40px;height:40px}.tooltip .button .text[data-v-53db2f1a]{font-size:16px;line-height:25px;color:#000;margin-left:16px;padding-right:20px}.mark[data-v-53db2f1a]{top:50%;transform:translateY(-50%);position:absolute;height:8px;width:4px;background-color:#000;z-index:10}.mark:hover .mark-tooltip[data-v-53db2f1a]{display:block}.mark .mark-tooltip[data-v-53db2f1a]{display:none;left:-54px;position:absolute;bottom:0;padding-bottom:8px;width:352px}.mark .mark-tooltip .tooltip-body[data-v-53db2f1a]{padding:16px;background-color:#e2e2e2;display:flex;flex-direction:column}.mark .mark-tooltip .tooltip-body .question[data-v-53db2f1a]{font-size:16px;line-height:19px;color:#000;margin-bottom:20px}.mark .mark-tooltip .arrow[data-v-53db2f1a]{margin-left:40px}.mark .mark-tooltip .time[data-v-53db2f1a]{margin-left:40px;font-size:12px;line-height:14px}",""]),t.exports=e},290:function(t,e,r){"use strict";r.r(e);r(56),r(19),r(18),r(14),r(45);function n(source,t){if(null==source)return{};var e,i,r=function(source,t){if(null==source)return{};var e,i,r={},n=Object.keys(source);for(i=0;i<n.length;i++)e=n[i],t.indexOf(e)>=0||(r[e]=source[e]);return r}(source,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(source);for(i=0;i<n.length;i++)e=n[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(r[e]=source[e])}return r}r(139),r(140),r(249),r(35);var o=r(7),c=r(20),l=r(77),d=r(100),f=r(234),m=r(227),v=r(233);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x={name:"Video",components:{PlusButton:r(239).a,CreationWrapper:f.a,Button:m.a},setup:function(){Object(v.b)(),Object(v.d)()},data:function(){return{min:0,max:100,currentTime:0,isPlaying:!1,playingInterval:0,loading:!1}},computed:y(y({},Object(l.c)("createTest",["videoURL","questions","videoStart","videoEnd"])),{},{videoID:function(){return Object(d.getIdFromUrl)(this.videoURL)},player:function(){var t;return null===(t=this.$refs.ytPlayer)||void 0===t?void 0:t.player},questionsMarks:function(){return this.questions.reduce((function(t,e){return t[e.video_time]=e.video_time,t}),{})},sliderOptions:function(){return{lazy:!0,hideLabel:!0,marks:this.questionsMarks,max:this.max,min:this.min,railStyle:{height:"2px",background:"#D4D4D4"},processStyle:{background:"#E6593D"},dotSize:[4,8],dotStyle:{height:"8px",width:"4px",background:"#5F9FFF"},tooltip:"always",tooltipPlacement:"bottom"}},playerVars:function(){return{controls:0,disablekb:1,fs:0,iv_load_policy:3,modestbranding:1,start:this.videoStart,end:this.videoEnd}}}),mounted:function(){this.$store.commit("createTest/clearCurrentQuestion")},methods:{handleReady:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.min=t.videoStart?t.videoStart:0,e.next=3,t.$nextTick();case 3:return e.next=5,t.player.playVideo();case 5:return e.next=7,t.player.pauseVideo();case 7:return e.next=9,t.player.seekTo(t.min);case 9:return e.next=11,t.player.getDuration();case 11:e.t0=e.sent,r=e.t0-1,t.max=Math.trunc(t.videoEnd>=r?r:t.videoEnd),t.isPlaying=!1;case 15:case"end":return e.stop()}}),e)})))()},handleEnded:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.currentTime=t.min,t.stopCurrentTimeUpdate(),e.next=4,t.handleReady();case 4:case"end":return e.stop()}}),e)})))()},handlePlay:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isPlaying){e.next=7;break}return t.isPlaying=!1,t.stopCurrentTimeUpdate(),e.next=5,t.player.pauseVideo();case 5:e.next=11;break;case 7:return t.isPlaying=!0,e.next=10,t.player.playVideo();case 10:t.updateCurrentTime();case 11:case"end":return e.stop()}}),e)})))()},updateCurrentTime:function(){var t=this;this.playingInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.player.getCurrentTime();case 2:(r=e.sent)<=t.max&&(t.currentTime=Math.trunc(r));case 4:case"end":return e.stop()}}),e)}))),1e3)},stopCurrentTimeUpdate:function(){clearInterval(this.playingInterval)},handleSliderChange:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopCurrentTimeUpdate(),e.next=3,t.player.seekTo(t.currentTime);case 3:t.isPlaying&&t.updateCurrentTime();case 4:case"end":return e.stop()}}),e)})))()},formatSeconds:function(t){var e=parseInt("".concat(t/60)),s=t%60;return"".concat(0===e?"00":e<10?"0".concat(e):e,":").concat(0===s?"00":s<10?"0".concat(s):s)},addQuestion:function(t){this.$router.push({path:"/create-test/select-question",query:{timestamp:t}})},editQuestion:function(t){var e;switch(this.$store.getters["createTest/questionExists"](t).question_type){case"text":e="select-time";break;case"test":e="question-test";break;case"compliance":e="question-compliance"}this.$router.push({path:"/create-test/question-text",query:{timestamp:t,next:e}})},findQuestionByTime:function(time){return this.questions.find((function(t){return t.video_time===Number(time)}))},handleGoBack:function(){this.$router.push({path:"/create-test/"})},handleGoForward:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,r={title:t.$store.state.createTest.title,video_url:t.$store.state.createTest.videoURL,video_start:t.$store.state.createTest.videoStart,video_end:t.$store.state.createTest.videoEnd,class:t.$store.state.createTest.class,subject:t.$store.state.createTest.subject,questions:t.$store.state.createTest.questions.map((function(t){if(t.variants){var e=t.variants.map((function(t){t.id;return n(t,["id"])}));return y(y({},t),{},{variants:e})}return t}))},e.next=5,t.$axios.$post("/test/create",r);case 5:return o=e.sent,c=o.id,t.$store.commit("createTest/setTestID",c),e.next=10,t.$router.push("/create-test/link");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))()}}},w=(r(271),r(17)),component=Object(w.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CreationWrapper",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Выберите момент для вопроса")]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"flex flex-col items-center"},[n("div",{staticClass:"mt-8 mb-6"},[n("div",{staticClass:"relative cursor-pointer bg-black",staticStyle:{"min-height":"360px"},on:{click:t.handlePlay}},[t.isPlaying?t._e():n("img",{staticClass:"play-button",attrs:{src:r(248)}}),t._v(" "),n("div",{staticClass:"player",style:t.isPlaying?null:"opacity: 0.4;",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[n("youtube",{ref:"ytPlayer",attrs:{width:"600","player-vars":t.playerVars,"video-id":t.videoID},on:{ready:t.handleReady,ended:t.handleEnded}})],1)])]),t._v(" "),n("div",{staticClass:"w-full mb-8 px-20"},[n("Slider",t._b({on:{change:t.handleSliderChange},scopedSlots:t._u([{key:"tooltip",fn:function(e){var r=e.value;return[t.questions.some((function(t){return t.video_time===Number(r)}))?n("div"):n("div",{staticClass:"tooltip"},[n("svg",{staticClass:"arrow",attrs:{width:"32",height:"13",viewBox:"0 0 32 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M16 -6.99382e-07L32 13L-5.68248e-07 13L16 -6.99382e-07Z",fill:"#5F9FFF"}})]),t._v(" "),n("PlusButton",{on:{click:function(e){return t.addQuestion(r)}}},[t._v("\n                Добавить вопрос\n              ")])],1)]}},{key:"mark",fn:function(e){var r=e.pos,time=e.label;return[n("div",{staticClass:"mark",style:{left:r+"%"}},[n("div",{staticClass:"mark-tooltip"},[n("div",{staticClass:"tooltip-body",on:{click:function(t){t.stopPropagation()}}},[n("span",{staticClass:"question"},[t._v("\n                    "+t._s(t.findQuestionByTime(time).question)+"\n                  ")]),t._v(" "),n("div",{staticClass:"flex space-x-4"},[n("Button",{staticStyle:{width:"168px"},on:{click:function(e){return t.editQuestion(time)}}},[t._v("\n                      Редактировать\n                    ")]),t._v(" "),n("Button",{on:{click:function(e){return t.$store.commit("createTest/removeQuestionAtTime",time)}}},[t._v("\n                      Удалить\n                    ")])],1)]),t._v(" "),n("svg",{staticClass:"arrow",attrs:{width:"32",height:"13",viewBox:"0 0 32 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M16 13L1.55023e-07 -9.53674e-07L32 -5.72078e-07L16 13Z",fill:"#5F9FFF"}})]),t._v(" "),n("span",{staticClass:"time"},[t._v("\n                  "+t._s(t.formatSeconds(t.findQuestionByTime(time).video_time))+"\n                ")])])])]}}]),model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}},"Slider",t.sliderOptions,!1))],1),t._v(" "),n("div",{staticClass:"mb-10 flex space-x-10"},[n("Button",{attrs:{type:"secondary"},on:{click:t.handleGoBack}},[t._v("Назад")]),t._v(" "),n("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleGoForward}},[t._v("\n          Завершить\n        ")])],1)])]},proxy:!0}])})}),[],!1,null,"53db2f1a",null);e.default=component.exports}}]);